<!DOCTYPE html>
<html>

<body>
    <h1>数据库表users信息</h1>
    <table border="1" cellspacing="0" style="margin-top: 20px">
        <tbody id="users">
            <tr>
                <td width="200">username</td>
                <td width="200">password</td>
            </tr>
        </tbody>
    </table>

    <h1>数据库表persons信息</h1>
    <table border="1" cellspacing="0" style="margin-top: 20px">
        <tbody id="persons">
            <tr >
                <td width="200">username</td>
                <td width="200">name</td>
                <td width="200">age</td>
                <td width="200">telenum</td>
            </tr>
        </tbody>
    </table>
    <a href="./index.html" style="margin-top:20px">返回数据库操作界面</a>
</body>
<script defer>
    Promise.all([fetch('http://localhost:8080/getPersons').then(res => res.json()), fetch(
        'http://localhost:8080/getUsers').then(res => res.json())]).then(res => {
        var persons = JSON.parse(res[0]).data
        console.log(persons)
        var users = JSON.parse(res[1]).data
        for(let i = 0; i < users.length; i++){
            var tr = document.createElement('tr')
            var td1 = document.createElement('td')
            td1.innerHTML = users[i].username
            var td2 = document.createElement('td')
            td2.innerHTML = users[i].pass
            tr.appendChild(td1)
            tr.appendChild(td2)
            document.querySelector('#users').appendChild(tr)
        }
        for(let i = 0; i < persons.length; i++){
            var tr = document.createElement('tr')
            var td1 = document.createElement('td')
            td1.innerHTML = persons[i].username
            var td2 = document.createElement('td')
            td2.innerHTML = persons[i].name
            var td3 = document.createElement('td')
            td3.innerHTML = persons[i].age
            var td4 = document.createElement('td')
            td4.innerHTML = persons[i].teleno
            tr.appendChild(td1)
            tr.appendChild(td2)
            tr.appendChild(td3)
            tr.appendChild(td4)
            document.querySelector('#persons').appendChild(tr)
        }
    })

</script>

</html>